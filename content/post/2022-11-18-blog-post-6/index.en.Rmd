---
title: blog-post-6
author: Daniel Sussman
date: '2022-11-18'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-11-18T20:31:58-05:00'
featuredVideo: ~
featuredImage: ~
---

```{r}
library(tidyverse)
library(shiny)

CO2_emissions <- read_csv(here::here("dataset","historical_emissions.csv"))


CO2_clean<-CO2_emissions %>% select(Country,34:6)
CO2_clean$`1990`<-as.double(CO2_clean$`1990`)

#df <- read_csv("dataset/annual_csv.RData")
df <- CO2_clean %>% pivot_longer(cols = c("1990":"2018"), names_to = "Year",values_to = "CO2emission")

# Client interface
ui <- fluidPage(
  # Application title
  titlePanel("CO2 Emissions"),
  
  #  Sidebar panel for input
  sidebarPanel(
    # User inputs year to query from
    selectInput(
      inputId = "year",
      label = "From which year:",
      choices = df$Year %>% unique(),
    ),
    
    # User inputs country to query from
    #textInput(
      #inputId = "country",
      #label = "Choose a country:",
      #value = "World"
    
    # User inputs country to query from
    selectInput(
      inputId = "country",
      label = "Which country are you from:",
      choices = df$Country%>% unique(),
    
      
      
          
    )
    
  ),
  
  mainPanel(
    plotOutput(outputId = "scatter")
  )
  
)

# Defines server logic
server <- function(input, output) {
  output$scatter <- renderPlot({
    df %>% 
      filter(Country == input$country) %>% 
      filter(Year >= input$year) %>%
      ggplot(aes(x = Year, y = CO2emission, group = 1)) +
      geom_point() +
      geom_line() +
      labs(x = "Year", y = "CO2 Emission")
  })
}

# Run the application
shinyApp(ui = ui, server = server)
```

We are working to create an interactive interface that will allow users to engage with the data we've been analyzing. As of yet, we have added a reactive graph that plots a line based on the time range and country inputted by the user. 

Now we are trying to update our SidePanel to allow for the selection of multiple countries at once to compare the trends of different countries.
